<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-e300fc08847bc3b288df.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-2e9a99750eedee209c30.js" as="script"/><link rel="preload" href="/path---variables-bbbb70cf62508c3d8707.js" as="script"/><link rel="preload" href="/app-2199a80fe77e87ca6ee3.js" as="script"/><link rel="preload" href="/commons-7e72e95503b9cd953cf5.js" as="script"/><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-2199a80fe77e87ca6ee3.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-2e9a99750eedee209c30.js","263791100135453":"component---src-pages-about-js-3abeb8ee051843100c0c.js","246501157640856":"component---src-pages-events-js-81785550bd5d1c8c0c3b.js","35783957827783":"component---src-pages-index-js-0fee2ae3a66e6d93c86c.js","201137348325247":"component---src-pages-philosophy-js-a68e9fde55b7ac2534a9.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","151134770526471":"path---2013-05-21-drupalcon-portland-session-notes-af867a89f70887e9e861.js","89926328501068":"path---2013-10-20-drupalcamp-atlanta-session-notes-40ff45d33818ed0f5f41.js","70377159570471":"path---2012-12-02-florida-drupalcamp-2012-session-notes-a67e5a76ca95e2fcb500.js","153452737195766":"path---2014-04-02-ie-dev-tips-647d1798fabbe02edda5.js","114348242770263":"path---2014-04-29-notes-on-developing-drupal-8-alpha-13-f557ee30791c26ef8d62.js","233186495815067":"path---2014-03-08-forida-drupalcamp-presentation-notes-a5fb15746369ec4ccd91.js","22890600373292":"path---2015-04-19-making-syfy-animations-not-suck-91c75d021c886765099a.js","254080940965904":"path---2014-09-04-new-method-comment-spam-25603d061b469fc20216.js","172002563442199":"path---2015-06-09-advice-newbie-frontend-developer-4f72c0c680dff924d6bc.js","39229358024304":"path---2015-06-16-importing-css-breakpoints-js-f9a2ea8b0038c3a1e95a.js","93009360049971":"path---2016-05-12-drupalcon-nola-chrome-devtools-05389fffcbaf7d6a9ab5.js","156685852824985":"path---2018-01-01-hello-2018-fbeff63c5dfbb6631144.js","257517845488331":"path---2017-12-31-reflections-on-2017-e445786ae4a994a79c6f.js","28210096298019":"path---2018-01-10-why-is-gatsby-fast-prpl-d1d856bc9c46fb235b16.js","197901525329746":"path---computer-ed57e4c2c4204d3498ac.js","231618293077614":"path---2018-01-15-css-grid-76f10f4192f1265af1ca.js","166629410078529":"path---pixel-dbbd591c48a5ceb93960.js","201811504738303":"path---vscode-233435b36f7638bddb90.js","267303814884553":"path---fast-b1558d45b2ed3be858fe.js","197122740458591":"path---variables-bbbb70cf62508c3d8707.js","273950069227526":"path---about-f8f2f2235c0cec2b21e4.js","44713349584700":"path---events-71086713fb85dbe8a16c.js","142629428675168":"path---index-f7efb954e56c957815c9.js","131048373002594":"path---philosophy-f8f2f2235c0cec2b21e4.js","114276838955818":"component---src-layouts-index-js-e300fc08847bc3b288df.js"}/*]]>*/</script><script>window.__EMOTION_CRITICAL_CSS_IDS__ = ["zdzcza","7nvq2j","1h7ssis","1rf18ua","11476v4","mad75p","17indrb","bm1ny3","1vbkrt9","1rnetnl","qrhta","14glvrn"];</script><style>.css-zdzcza{margin-top:20px;}@media (max-width:1000px){.css-zdzcza{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;text-align:left;}}@media (max-width:450px){.css-zdzcza{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}}@media (max-width:450px){.css-zdzcza a{height:50px;overflow:hidden;}}.css-zdzcza img{border-radius:50%;}@media (max-width:1000px){.css-zdzcza img{width:75px;margin-right:10px;}}@media (max-width:450px){.css-zdzcza img{margin-top:10px;}}.css-zdzcza p{color:white;font-size:16px;width:100%;margin:0;}@media (min-width:450px){.css-zdzcza p{margin-right:40px;}}@media (min-width:1000px){.css-zdzcza p{margin-right:0;margin-top:20px;padding:20px;background-color:rgba(255,255,255,0.15);font-size:20px;}}@media (min-width:1000px){.css-7nvq2j{position:-webkit-sticky;position:sticky;top:20px;}}.css-1h7ssis{position:fixed;top:35px;right:3%;width:40px;z-index:3;padding:0;overflow:hidden;border:0;mix-blend-mode:multiply;-webkit-filter:brightness(0.7);filter:brightness(0.7);background:transparent;color:var(--primary);font-size:40px;line-height:40px;cursor:pointer;-webkit-transition:0.2s;transition:0.2s;}@media (min-width:1000px){.css-1h7ssis{display:none;}}.css-1h7ssis:before{content:"☰";display:block;}.css-1h7ssis.active{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);outline:0;}.css-1h7ssis span{font-size:0;position:absolute;visibility:hidden;}@media (max-width:1000px){.css-1rf18ua{display:none;position:fixed;z-index:2;top:0;left:0;width:100%;height:100vh;overflow:auto;-webkit-overflow-scrolling:touch;background:var(--primary);padding:40px;text-align:left;}}.css-11476v4{margin:0 0 20px;font-size:40px;font-weight:bold;}@media (min-width:1000px){.css-11476v4{margin-top:20px;}}.css-11476v4 a{display:block;color:white;text-decoration:none;}@media (min-width:1000px){.css-11476v4 a.active:not(:first-child){text-decoration:underline;}}.css-mad75p{color:rgba(255,255,255,0.8);}.css-mad75p a{color:white;}*{box-sizing:border-box;touch-action:manipulation;}*:before,*:after{box-sizing:inherit;}:root{--primary:hsla(var(--primary-hue),var(--primary-saturation),var(--primary-luminosity),var(--primary-alpha));--primary-hue:195;--primary-saturation:100%;--primary-luminosity:50%;--primary-alpha:1;--gray:#333;--white:white;--font-sans:helvetica,arial,sans-serif;--font-serif:georgia,serif;}::selection{color:var(--primary);background:black;}body{margin:0;background-color:var(--primary);line-height:1.7;overflow:scroll;font-family:var(--font-sans);-webkit-transition:0.2s;transition:0.2s;}body:before{content:"";position:fixed;z-index:-1;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;left:0;width:100%;height:100vh;background:url(/bg-boxes.jpg);opacity:0.4;-webkit-filter:grayscale(100%) invert(100%);filter:grayscale(100%) invert(100%);}body:after{content:"";position:fixed;z-index:-1;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;left:0;width:100%;height:100vh;background-image:linear-gradient(to bottom,var(--primary),transparent 70%);}h1,h2,h3{line-height:1.4;color:var(--gray);margin:1em 0 0.5em;}h1:first-child,h2:first-child,h3:first-child{margin-top:0;}@media (max-width:700px){h1{font-size:30px;}}h2{border-bottom:dotted 1px #ccc;}@media (max-width:700px){h2{font-size:25px;}}h3{margin:40px 0 5px;color:var(--primary);-webkit-filter:brightness(75%);filter:brightness(75%);font-size:22px;font-family:var(--font-sans);}h3 + p{margin-top:10px;}blockquote{background-color:#eee;padding:10px 20px;border-left:solid 5px #ccc;font-family:var(--font-sans);}@media (max-width:500px){blockquote{margin-left:0;margin-right:0;}}video{display:block;}figure{margin:20px 0;background:#eee;}figure[border]{padding:3px;}figcaption{padding:5px 20px;font-family:var(--font-sans);font-style:italic;font-size:16px;line-height:1.2;}iframe.twitter-tweet,twitterwidget{margin-left:auto;margin-right:auto;}.content{position:relative;min-height:calc(100vh - 20px);padding:20px;background:var(--white);font-family:var(--font-serif);color:#666;font-size:22px;line-height:2;}@media (min-width:1000px){.content{padding:40px;}.content:before{content:"";position:absolute;right:100%;top:70px;-webkit-transform:translatey(-50%);-ms-transform:translatey(-50%);transform:translatey(-50%);height:0;width:0;border-top:solid transparent 20px;border-right:solid var(--white) 20px;border-bottom:solid transparent 20px;}}.content em{opacity:0.9;}.content a{color:var(--primary);}.content li{margin:15px 0;}.content li:first-child{margin-top:0;}.content li:last-child{margin-bottom:0;}.css-bm1ny3{width:94%;max-width:1200px;margin:10px auto;--header-width:220px;}@media (min-width:1000px){.css-bm1ny3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}}@media (min-width:1200px){.css-bm1ny3{--header-width:320px;}}@media (min-width:1000px){.css-bm1ny3 header{margin-right:40px;-webkit-flex-basis:var(--header-width);-ms-flex-preferred-size:var(--header-width);flex-basis:var(--header-width);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}}@media (min-width:1200px){.css-bm1ny3 header{margin-right:60px;}}@media (min-width:1000px){.css-bm1ny3 main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;width:calc(100% - (var(--header-width) + 40px));}}@media (min-width:1200px){.css-bm1ny3 main{width:calc(100% - (var(--header-width) + 60px));}}.css-bm1ny3 footer{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;}.css-1vbkrt9{text-align:right;color:white;}.css-1rnetnl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:rgba(255,255,255,0.8);}@media (min-width:500px){.css-1rnetnl{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1rnetnl > *:not(:last-child):after{content:"   |   ";white-space:pre;color:white;}}.css-1rnetnl a{color:white;}.css-qrhta article{overflow:hidden;}.css-qrhta .gatsby-highlight{font-size:16px;overflow:auto;-webkit-overflow-scrolling:touch;}.css-qrhta code{padding:2px 5px;background:#eee;white-space:nowrap;}.css-qrhta .gatsby-highlight code{padding:initial;background:initial;white-space:inherit;}.css-qrhta .meta{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-family:var(--font-sans);font-size:16px;color:#999;line-height:1.2;}@media (min-width:500px){.css-qrhta .meta{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-qrhta .meta > *:not(:last-child):after{content:"   |   ";white-space:pre;color:#aaa;}}.css-qrhta .mike,.css-qrhta blockquote.twitter-tweet:not(.twitter-tweet-rendered){position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:500px;min-width:220px;max-width:520px;margin:10px auto;padding:20px 20px 30px 20px;border:1px solid #e1e8ed;border-radius:5px;background-color:#fff;font:normal normal 16px/1.4 Helvetica,Roboto,"Segoe UI",Calibri,sans-serif;color:#1c2022;cursor:pointer;}.css-qrhta .mike:before,.css-qrhta blockquote.twitter-tweet:not(.twitter-tweet-rendered):before{content:"";position:absolute;right:20px;top:20px;width:20px;height:20px;background-image:url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2072%2072%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h72v72H0z%22%2F%3E%3Cpath%20class%3D%22icon%22%20fill%3D%22%231da1f2%22%20d%3D%22M68.812%2015.14c-2.348%201.04-4.87%201.744-7.52%202.06%202.704-1.62%204.78-4.186%205.757-7.243-2.53%201.5-5.33%202.592-8.314%203.176C56.35%2010.59%2052.948%209%2049.182%209c-7.23%200-13.092%205.86-13.092%2013.093%200%201.026.118%202.02.338%202.98C25.543%2024.527%2015.9%2019.318%209.44%2011.396c-1.125%201.936-1.77%204.184-1.77%206.58%200%204.543%202.312%208.552%205.824%2010.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163%200%206.345%204.513%2011.638%2010.504%2012.84-1.1.298-2.256.457-3.45.457-.845%200-1.666-.078-2.464-.23%201.667%205.2%206.5%208.985%2012.23%209.09-4.482%203.51-10.13%205.605-16.26%205.605-1.055%200-2.096-.06-3.122-.184%205.794%203.717%2012.676%205.882%2020.067%205.882%2024.083%200%2037.25-19.95%2037.25-37.25%200-.565-.013-1.133-.038-1.693%202.558-1.847%204.778-4.15%206.532-6.774z%22%2F%3E%3C%2Fsvg%3E);background-size:contain;background-repeat:no-repeat;}.css-qrhta .mike > a,.css-qrhta blockquote.twitter-tweet:not(.twitter-tweet-rendered) > a{margin-top:3.2px;-webkit-order:3;-ms-flex-order:3;order:3;font-size:14px;color:rgb(105,120,130);text-decoration:none;}.css-qrhta .mike > p,.css-qrhta blockquote.twitter-tweet:not(.twitter-tweet-rendered) > p{-webkit-order:2;-ms-flex-order:2;order:2;}.css-qrhta .mike > p a,.css-qrhta blockquote.twitter-tweet:not(.twitter-tweet-rendered) > p a{color:rgb(43,123,185);text-decoration:none;}.css-14glvrn{position:relative;margin-top:30px;padding:20px;background:#eee;}.css-14glvrn:before{content:"";position:absolute;left:20px;bottom:100%;height:0;width:0;border-bottom:solid 20px #eee;border-left:solid 20px transparent;border-right:solid 20px transparent;}</style><title data-react-helmet="true">Making Rainbows with CSS Variables and React | Mike Herchel</title><link data-react-helmet="true" rel="icon" type="image/png" href="favicon.png"/><meta data-react-helmet="true" property="og:image" content="https://herchel.com/herchelshead.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:image" content="https://herchel.com/herchelshead.jpg"/><meta data-react-helmet="true" name="twitter:site" content="@mikeherchel"/><meta data-react-helmet="true" name="twitter:creator" content="@mikeherchel"/><meta data-react-helmet="true" name="description" content="I added an  easter egg  to my blog last week. If you click and drag the background (you have to be on a screen wider than 1000px to do so…"/><meta data-react-helmet="true" name="twitter:title" content="Making Rainbows with CSS Variables and React | Mike Herchel"/><meta data-react-helmet="true" name="twitter:description" content="I added an  easter egg  to my blog last week. If you click and drag the background (you have to be on a screen wider than 1000px to do so…"/><style data-react-helmet="true">
            :root {
              --primary-hue: 195;
              --primary-luminosity: 50%;
              -webkit-user-select: auto;
              -moz-user-select: auto;
              user-select: auto;
            </style><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-7e72e95503b9cd953cf5.js","/app-2199a80fe77e87ca6ee3.js","/path---variables-bbbb70cf62508c3d8707.js","/component---src-templates-blog-post-js-2e9a99750eedee209c30.js","/component---src-layouts-index-js-e300fc08847bc3b288df.js"])/*]]>*/</script><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;color:#c5c8c6;font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em 4em 1em 2em;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:rgba(29,31,33,.9)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div class="css-bm1ny3" data-reactroot="" data-reactid="1" data-react-checksum="-1589032456"><!-- react-empty: 2 --><header class="css-1vbkrt9" data-reactid="3"><div class="css-zdzcza" data-reactid="4"><a href="/" data-reactid="5"><img src="/static/herchelshead.d39009c9.jpg" alt="Mike herchel" data-reactid="6"/></a><p data-reactid="7">Hi, I&#x27;m Mike Herchel, and I use Drupal, JavaScript, and other technologies to kick various asses throughout cyberspace.</p></div><div class="css-7nvq2j" data-reactid="8"><button class="css-1h7ssis " data-reactid="9"><span data-reactid="10">Toggle Navigation</span></button><div class="css-1rf18ua" style="display:;" data-reactid="11"><nav class="css-11476v4" data-reactid="12"><a class="active" aria-current="true" href="/" data-reactid="13">Home</a><a aria-current="false" href="/about" data-reactid="14">About</a><a aria-current="false" href="/philosophy" data-reactid="15">Philosophy</a><a aria-current="false" href="/events" data-reactid="16">Events</a></nav><section class="css-mad75p" data-reactid="17"><p data-reactid="18"><!-- react-text: 19 -->Email me at <!-- /react-text --><a href="mailto:mike@herchel.com" target="_blank" data-reactid="20">mike@herchel.com</a></p><p data-reactid="21"><!-- react-text: 22 -->Follow me at <!-- /react-text --><a href="http://twitter.com/mikeherchel" target="_blank" data-reactid="23">@mikeherchel</a></p><p data-reactid="24"><!-- react-text: 25 -->I&#x27;m on github at <!-- /react-text --><a href="https://github.com/mherchel" target="_blank" data-reactid="26">github.com/mherchel</a></p><p data-reactid="27"><!-- react-text: 28 -->Facebook profile is <!-- /react-text --><a href="http://www.facebook.com/mherchel" target="_blank" data-reactid="29">facebook.com/mherchel</a></p><p data-reactid="30"><!-- react-text: 31 -->Find me on D.O at <!-- /react-text --><a href="http://drupal.org/user/118428" target="_blank" data-reactid="32">drupal.org/user/118428</a></p><p data-reactid="33"><!-- react-text: 34 -->I don&#x27;t use LinkedIn <!-- /react-text --><a href="http://www.linkedin.com/in/mherchel" target="_blank" data-reactid="35">linkedin.com/in/mherchel</a></p></section></div></div></header><main role="main" data-reactid="36"><div class="content css-qrhta" data-reactid="37"><!-- react-empty: 38 --><h1 data-reactid="39">Making Rainbows with CSS Variables and React</h1><div class="meta" data-reactid="40"><span class="date" data-reactid="41">January 20, 2018</span><span class="author" data-reactid="42"><!-- react-text: 43 -->By <!-- /react-text --><!-- react-text: 44 -->Mike Herchel<!-- /react-text --></span></div><article data-reactid="45"><p>I added an <em>easter egg</em> to my blog last week. If you click and drag the background (you have to be on a screen wider than 1000px to do so), the background color will change. It’s pretty silly, but I had a lot of fun doing it. Here’s how it’s done and why it’s performant (sometimes).</p>
<figure>
    <video width="100%" controls  muted>
      <source src="/color-changing-variables-3d97eb494983fc187426096de03f47ff.mp4" type="video/mp4">
    </video>
    <figcaption>Here's a video of the color changing in action, in case you're on mobile.</figcaption>
</figure>
<h2>First, let’s set everything up without variables or React</h2>
<p>My default background color is <code>deepskyblue</code>, which is a named color. </p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>For the background image, I’m using a pattern from <a href="https://www.toptal.com/designers/subtlepatterns/">Subtle Patterns</a> that can be downloaded <a href="https://www.toptal.com/designers/subtlepatterns/subtle-grey/">here</a>. </p>
<p>I want the background image to be fixed (meaning that it won’t move when scrolled), but that introduces a performance issue: When scrolling on a page that has <code>background-attachment: fixed;</code>, the page will continuously repaint on scroll. This is expensive for the CPU, and can often lead to situations where the page acts “janky” while scrolling. </p>
<p>To get around this, I’m creating a <code>::before</code> pseudo-element on the <code>body</code>, and then fixed positioning it, <em>and</em> promoting it to its own composite layer. This will mitigate any scrolling issues.</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">body:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span> <span class="token comment">/* This will not scroll with the page. */</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span> <span class="token comment">/* Make sure it appears behind any content. */</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/* This is what promotes it to its own layer. */</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/bg.jpg)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now the background image is taking up the full width of the screen and doesn’t scroll — but, it doesn’t look right. We cannot see the <code>background-color</code> underneath.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-5a312.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2bCAf//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAQADAAAAAAAAAAAAAAAAAAEAEDH/2gAIAQEAAT8h2BX/2gAMAwEAAgADAAAAEPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAQADAQAAAAAAAAAAAAAAAREAECGh/9oACAEBAAE/EICJRzst81//2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Screenshot"
        title=""
        src="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-893a4.jpg"
        srcset="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-bbf57.jpg 200w,
/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-260b8.jpg 400w,
/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-893a4.jpg 800w,
/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-5a312.jpg 1000w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>To fix this, we need to grayscale the image, invert the colors, and then add an opacity. We do all of this via CSS:</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">body:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/bg.jpg)</span><span class="token punctuation">;</span>

  <span class="token comment">/* New stuff down here. */</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.4<span class="token punctuation">;</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/bg-2-0ded599dd9fcad4d0056dac216044036-5a312.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwIE/9oADAMBAAIQAxAAAAHG4LnhCy//xAAVEAEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAQABBQIv/8QAFREBAQAAAAAAAAAAAAAAAAAAAxD/2gAIAQMBAT8BOf/EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAECAQE/AXP/xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQEAAT8h2i6//9oADAMBAAIAAwAAABD0L//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxB4z//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxCgv//EABsQAAEEAwAAAAAAAAAAAAAAAAEAESFBMVFx/9oACAEBAAE/EGxIBe9IoJejSydX/9k='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Screenshot"
        title=""
        src="/static/bg-2-0ded599dd9fcad4d0056dac216044036-893a4.jpg"
        srcset="/static/bg-2-0ded599dd9fcad4d0056dac216044036-bbf57.jpg 200w,
/static/bg-2-0ded599dd9fcad4d0056dac216044036-260b8.jpg 400w,
/static/bg-2-0ded599dd9fcad4d0056dac216044036-893a4.jpg 800w,
/static/bg-2-0ded599dd9fcad4d0056dac216044036-5a312.jpg 1000w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Looking good! But, we still need to add that fade that’s near the top. To do this, we’re using a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient">linear-gradient</a> fading between <code>deepskyblue</code> and <code>transparent</code>. </p>
<p>Because we also do not want this to scroll, we’re using the <code>::after</code> pseudo element on the <code>body</code> tag.</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">body:after</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom, deepskyblue, transparent 70%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now it looks right! But, there’s a problem. We’re declaring the color (<code>deepskyblue</code>) twice. What can we do about that?</p>
<h2>CSS Variables to the rescue!</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">CSS Variables</a> (aka CSS Custom Properties) are awesome. Let’s get started. </p>
<p>First we’ll add the variable to the <code>:root</code> element, which is the HTML element. </p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--primary</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Then we can change around the background color, and the linear-gradient.</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body:after</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom, <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span>, transparent 70%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>While we’re at it, let’s change the colors of hyperlinks and <code>h3</code> tags.</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">.content a</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h3</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">brightness</span><span class="token punctuation">(</span>75%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Let's darken this a bit. */</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Looking good, but how can we manipulate the colors?</p>
<h2>Convert the colors to HSLA</h2>
<p>HSLA stands for <strong>H</strong>ue, <strong>S</strong>aturation, <strong>L</strong>ightness, and <strong>A</strong>lpha. </p>
<p>Explain set up
Background image filter opacity
background
<a href="https://www.toptal.com/designers/subtlepatterns/">https://www.toptal.com/designers/subtlepatterns/</a></p>
<p>Changing the color to a variable</p>
<p>use the variable across the site
a, h3, selection</p>
<p>Changing the variable to more variables</p>
<p>Bind the variables to react state</p>
<p>Detecting the mouse position
Only do so on click
don’t do so when highlighting content
Update the state on change</p>
<p>disable highlighting text</p>
<p>What’s next?</p>
<p>Save state in local storage</p></article><div class="css-14glvrn" data-reactid="46"><!-- react-text: 47 -->Thanks for reading. Notice an error or have something to contribute? <!-- /react-text --><a href="https://github.com/mherchel/herchel.com" target="_blank" data-reactid="48">Submit a Pull Request</a><!-- react-text: 49 -->!<!-- /react-text --></div></div></main><footer class="css-1rnetnl" data-reactid="50"><span class="developed" data-reactid="51"><!-- react-text: 52 -->Developed using <!-- /react-text --><a target="_blank" href="http://gatsbyjs.org" data-reactid="53">GatsbyJS</a></span><span class="github" data-reactid="54"><!-- react-text: 55 -->Submit a PR <!-- /react-text --><a target="_blank" href="https://github.com/mherchel/herchel.com" data-reactid="56">on GitHub</a></span></footer></div></div><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'undefined', 'auto');
  </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script></body></html>