webpackJsonp([0xb34836ec145f],{403:function(n,a){n.exports={data:{site:{siteMetadata:{title:"Mike Herchel",author:"Mike Herchel"}},markdownRemark:{id:"/Users/mherchel/sites/herchel-new/src/blog/variables/index.md absPath of file >>> MarkdownRemark",html:'<p>I added an <em>easter egg</em> to my blog last week. If you click and drag the background (you have to be on a screen wider than 1000px to do so), the background color will change. It’s pretty silly, but I had a lot of fun doing it. Here’s how it’s done and why it’s performant (sometimes).</p>\n<figure>\n    <video width="100%" controls  muted>\n      <source src="/color-changing-variables-3d97eb494983fc187426096de03f47ff.mp4" type="video/mp4">\n    </video>\n    <figcaption>Here\'s a video of the color changing in action, in case you\'re on mobile.</figcaption>\n</figure>\n<h2>First, let’s set everything up without variables or React</h2>\n<p>My default background color is <code>deepskyblue</code>, which is a named color. </p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>For the background image, I’m using a pattern from <a href="https://www.toptal.com/designers/subtlepatterns/">Subtle Patterns</a> that can be downloaded <a href="https://www.toptal.com/designers/subtlepatterns/subtle-grey/">here</a>. </p>\n<p>I want the background image to be fixed (meaning that it won’t move when scrolled), but that introduces a performance issue: When scrolling on a page that has <code>background-attachment: fixed;</code>, the page will continuously repaint on scroll. This is expensive for the CPU, and can often lead to situations where the page acts “janky” while scrolling. </p>\n<p>To get around this, I’m creating a <code>::before</code> pseudo-element on the <code>body</code>, and then fixed positioning it, <em>and</em> promoting it to its own composite layer. This will mitigate any scrolling issues.</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">body:before</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span> <span class="token comment">/* This will not scroll with the page. */</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span> <span class="token comment">/* Make sure it appears behind any content. */</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>\n  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/* This is what promotes it to its own layer. */</span>\n  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/bg.jpg)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Now the background image is taking up the full width of the screen and doesn’t scroll — but, it doesn’t look right. We cannot see the <code>background-color</code> underneath.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-5a312.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2bCAf//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAQADAAAAAAAAAAAAAAAAAAEAEDH/2gAIAQEAAT8h2BX/2gAMAwEAAgADAAAAEPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAQADAQAAAAAAAAAAAAAAAREAECGh/9oACAEBAAE/EICJRzst81//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Screenshot"\n        title=""\n        src="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-893a4.jpg"\n        srcset="/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-bbf57.jpg 200w,\n/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-260b8.jpg 400w,\n/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-893a4.jpg 800w,\n/static/bg-1-55dbd25f30cc4ef2e12f2bfce64f1ee9-5a312.jpg 1000w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>To fix this, we need to grayscale the image, invert the colors, and then add an opacity. We do all of this via CSS:</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">body:before</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>\n  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/bg.jpg)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">/* New stuff down here. */</span>\n  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.4<span class="token punctuation">;</span>\n  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/bg-2-0ded599dd9fcad4d0056dac216044036-5a312.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwIE/9oADAMBAAIQAxAAAAHG4LnhCy//xAAVEAEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAQABBQIv/8QAFREBAQAAAAAAAAAAAAAAAAAAAxD/2gAIAQMBAT8BOf/EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAECAQE/AXP/xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQEAAT8h2i6//9oADAMBAAIAAwAAABD0L//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxB4z//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxCgv//EABsQAAEEAwAAAAAAAAAAAAAAAAEAESFBMVFx/9oACAEBAAE/EGxIBe9IoJejSydX/9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Screenshot"\n        title=""\n        src="/static/bg-2-0ded599dd9fcad4d0056dac216044036-893a4.jpg"\n        srcset="/static/bg-2-0ded599dd9fcad4d0056dac216044036-bbf57.jpg 200w,\n/static/bg-2-0ded599dd9fcad4d0056dac216044036-260b8.jpg 400w,\n/static/bg-2-0ded599dd9fcad4d0056dac216044036-893a4.jpg 800w,\n/static/bg-2-0ded599dd9fcad4d0056dac216044036-5a312.jpg 1000w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Looking good! But, we still need to add that fade that’s near the top. To do this, we’re using a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient">linear-gradient</a> fading between <code>deepskyblue</code> and <code>transparent</code>. </p>\n<p>Because we also do not want this to scroll, we’re using the <code>::after</code> pseudo element on the <code>body</code> tag.</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">body:after</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>\n  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>\n  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom, deepskyblue, transparent 70%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Now it looks right! But, there’s a problem. We’re declaring the color (<code>deepskyblue</code>) twice. What can we do about that?</p>\n<h2>CSS Variables to the rescue!</h2>\n<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">CSS Variables</a> (aka CSS Custom Properties) are awesome. Let’s get started. </p>\n<p>First we’ll add the variable to the <code>:root</code> element, which is the HTML element. </p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>\n  <span class="token property">--primary</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Then we can change around the background color, and the linear-gradient.</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">body:after</span> <span class="token punctuation">{</span>\n  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom, <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span>, transparent 70%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>While we’re at it, let’s change the colors of hyperlinks and <code>h3</code> tags.</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">.content a</span> <span class="token punctuation">{</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">h3</span> <span class="token punctuation">{</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">brightness</span><span class="token punctuation">(</span>75%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Let\'s darken this a bit. */</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Looking good, but how can we manipulate the colors?</p>\n<h2>Convert the colors to HSLA</h2>\n<p>HSLA stands for <strong>H</strong>ue, <strong>S</strong>aturation, <strong>L</strong>ightness, and <strong>A</strong>lpha. </p>\n<p>Explain set up\nBackground image filter opacity\nbackground\n<a href="https://www.toptal.com/designers/subtlepatterns/">https://www.toptal.com/designers/subtlepatterns/</a></p>\n<p>Changing the color to a variable</p>\n<p>use the variable across the site\na, h3, selection</p>\n<p>Changing the variable to more variables</p>\n<p>Bind the variables to react state</p>\n<p>Detecting the mouse position\nOnly do so on click\ndon’t do so when highlighting content\nUpdate the state on change</p>\n<p>disable highlighting text</p>\n<p>What’s next?</p>\n<p>Save state in local storage</p>',excerpt:"I added an  easter egg  to my blog last week. If you click and drag the background (you have to be on a screen wider than 1000px to do so…",frontmatter:{title:"Making Rainbows with CSS Variables and React",date:"January 20, 2018",author:null}}},pathContext:{slug:"/variables/"}}}});
//# sourceMappingURL=path---variables-bbbb70cf62508c3d8707.js.map